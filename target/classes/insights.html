<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>Insights - Global Health Dashboard</title>
  <link rel="stylesheet" type="text/css" href="common.css" />
</head>
<body>
  <!-- Top Navigation -->
  <div class="simple-topnav">
    <a href="/" class="nav-logo-link">
      <img src="logo.png" class="nav-logo" alt="Global Health Dashboard Logo" />
    </a>
    <div class="nav-links">
      <a href="/">Homepage</a>
      <a href="/explore">Explore Data</a>
      <a href="/trending">Trending</a>
      <a href="/insights" class="active">Insights</a>
      <a href="/mission">Mission Statement</a>
      <a href="/feedback">Feedback</a>
    </div>
  </div>

  <!-- Page Header -->
  <div class="header">
    <h1 th:text="${title}"></h1>
    <p class="subtitle">Turning global health data into actionable insights</p>
  </div>

  <!-- Content -->
  <div class="content">
    <p>This page provides detailed insights and analysis of global health data.</p>

    <!-- Card with Table -->
    <div class="card-insights">
      <h3>Global Vaccination Coverage</h3>
      <table>
        <tr>
          <th>Country</th>
          <th>Average Coverage</th>
          <th>Visual</th>
        </tr>
        <tr th:each="row : ${mapData}">
          <td th:text="${row.country_name}"></td>
          <td th:text="${row.avg_coverage}"></td>
          <td>
            <div class="bar" th:style="'width:' + ${row.avg_coverage} + '%;'"></div>
          </td>
        </tr>
      </table>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <p><strong>Global Health Dashboard</strong></p>
      <nav class="footer-links">
        <a href="/">Homepage</a> |
        <a href="/explore">Explore Data</a> |
        <a href="/trending">Trending</a> |
        <a href="/insights">Insights</a> |
        <a href="/mission">Mission Statement</a> |
        <a href="/feedback">Feedback</a>
      </nav>
      <p>
        <small>
          Â© 2025 RMIT University - Global Vaccination Initiatives |
          Empowering informed global health decisions
        </small>
      </p>
    </div>
  </footer>
      <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script th:inline="javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        // Thymeleaf injects chartDataJS here
        var data = google.visualization.arrayToDataTable([[$chartDataJS]]);
        
        var options = {
          title: 'Top 10 Countries by Average Vaccination Coverage',
          legend: { position: 'none' },
          colors: ['#2e86de'],
          hAxis: { title: 'Coverage (%)', viewWindow: { min: 0, max: 120 } },
          chartArea: { width: '70%' }
        };

        var chart = new google.visualization.BarChart(document.getElementById('coverage_chart'));
        chart.draw(data, options);
      }
    </script>

    <div id="coverage_chart" style="width: 100%; height: 500px; margin-top: 40px;"></div>


</body>
</html>
